!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("zego-express-engine-webrtc"));else if("function"==typeof define&&define.amd)define(["zego-express-engine-webrtc"],t);else{var r="object"==typeof exports?t(require("zego-express-engine-webrtc")):t(e["zego-express-engine-webrtc"]);for(var o in r)("object"==typeof exports?exports:e)[o]=r[o]}}("undefined"!=typeof self?self:this,(function(e){return function(e){var t={};function r(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(o,i,function(t){return e[t]}.bind(null,i));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(t,r){t.exports=e},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClientUtil=void 0;var o=r(5),i=function(){function e(){}return e.checkIllegalCharacters=function(e){return/^([0-9a-zA-Z#!$%&()`'+-;<=.>@^_~,\\*])+$/.test(e)&&/^[^:/]*$/g.test(e)},e.isUrl=function(e){return!!(e.startsWith("rtmp://")||e.startsWith("https://")&&e.endsWith(".flv")||e.startsWith("https://")&&e.endsWith(".m3u8"))},e.registerCallback=function(e,t,r){var o,i;t.success&&(o=t.success,r[e+"SuccessCallback"]=o),t.error&&(i=t.error,r[e+"ErrorCallback"]=i)},e.actionErrorCallback=function(e,t){return t[e+"ErrorCallback"]},e.actionSuccessCallback=function(e,t){return t[e+"SuccessCallback"]},e.logReportCallback=function(t,r,o,i){e.registerCallback(t,{success:function(t,i){for(var n=[],s=2;s<arguments.length;s++)n[s-2]=arguments[s];e.dataReportEvent(r,o,t,i,n)}},i)},e.unregisterCallback=function(e,t){delete t[e+"SuccessCallback"],delete t[e+"ErrorCallback"]},e.decodeServerError=function(e,t){var r={code:-1,message:"server error"};return e>1e9&&(r.code=e-1e9+52e6),t&&(r.message=t),r},e.getLiveRoomError=function(e){return e>1e9?{1105:"ROOM_MAX_USER_COUNT",1012:"PUBLISHER_ERROR_REPETITIVE_PUBLISH_STREAM",2002:"ROOM_ERROR_AUTHENTICATION_FAILED",2003:"ROOM_ERROR_LOGIN_TIMEOUT"}[e-1e9]||"":{1:"PARSE_JSON_ERROR",1001:"LOGIN_PROCESSING",1002:"LIVEROMM_REQUEST_ERROR",1003:"ZPUSH_REQUEST_FAIL",1004:"ZPUSH_REQUEST_FAIL",1005:"ZPUSH_REQUEST_FAIL",1006:"LOGIN_STATE_WRONG",1007:"ZPUSH_REQUEST_FAIL",1008:"TOKEN_ERROR",1009:"DIAPATCH_ERROR",1010:"TOKEN_EXPIRED",1011:"TOKEN_ERROR",1012:"SUBCMD_ERROR",1101:"ZEGO_AUTH_ERROR",2001:"BIZ_CHANNEL_ERROR",2002:"BIZ_CHANNEL_ERROR"}[e]||"ROOM_INNER_ERROR"},e.mixServerError=function(e){var t={82000001:"kMixStreamFailError",82000002:"kMixStreamInputError",82000003:"kMixStreamAuthError",82000150:"kMixStreamNotExistError",82000151:"kMixStreamStartMixError",82000152:"kMixStreamStopMixError",82000155:"kMixStreamInputFormatError",82000156:"kMixStreamOutputFormatError",82000157:"kMixStreamNotOpenError",82000158:"kMixStreamInputExceedError",82000159:"kMixStreamDispatchError",82000160:"kMixStreamStopMixOwnerError",82000170:"kMixStreamWaterMarkParamError",82000171:"kMixStreamWaterMarkImageError",82000190:"kMixStreamQpsOverloadError"},r={1:"MIXER_START_REQUEST_ERROR",3:"MIXER_AUTHENTICATION_FAILED",150:"MIXER_INPUT_STREAM_NOT_EXISTS",151:"MIXER_START_REQUEST_ERROR",152:"MIXER_STOP_REQUEST_ERROR",153:"MIXER_INPUT_PARAMETERS_ERROR",154:"MIXER_EXCEED_MAX_OUTPUT_COUNT",155:"MIXER_INPUT_PARAMETERS_ERROR",156:"MIXER_VIDEO_CONFIG_INVALID",157:"MIXER_NO_SERVICES",158:"MIXER_EXCEED_MAX_INPUT_COUNT",159:"MIXER_START_REQUEST_ERROR",160:"MIXER_NOT_OWNER_STOPMIXER",170:"MIXER_WATERMARK_PARAMETERS_ERROR",171:"MIXER_WATERMARK_NULL",190:"MIXER_START_REQUEST_ERROR"},o=[];if(e>1e9){var i=e-1e9+82e6;o[0]=t[i]?t[i]:"",o[1]=r[e-1e9]?r[e-1e9]:""}return o},e.getKickoutError=function(e){var t={};switch(e){case 1:t.code=63000001,t.message="zpush multiple login kickout",t.name="MULTIPLE_LOGIN_KICKOUT";break;case 2:t.code=63000002,t.message="zpush manual kickout",t.name="MANUAL_KICKOUT";break;case 3:t.code=63000003,t.message="kickout reason = "+e;break;case 4:t.code=63000001,t.message="zpush multiple login kickout",t.name="MULTIPLE_LOGIN_KICKOUT";break;default:t.code=e,t.message="kickout reason = "+e}return t},e.dataReportEvent=function(e,t,r,o,i){switch(r){case"eventStart":e.eventStart(t,o);break;case"eventEndWithMsgInfo":e.eventEndWithMsgInfo(t,o,i[0]);break;case"addEventMsg":e.addEventMsg(t,o,i[0],i[1]);break;case"addEvent":e.addEvent(t,o);break;case"eventEnd":e.eventEnd(t,o);break;case"addMsgInfo":e.addMsgInfo(t,i[0])}},e.isKeepTryLogin=function(e){switch(e){case 1002:case 1003:return!0;default:return!1}},e.mergeStreamList=function(e,t,r,o){var i,n=[],s=[],a=[];r||(r=[]);for(var d=0;d<r.length;d++)if(r[d].anchor_id_name!=e){i=!1;for(var c=0;c<t.length;c++)if(r[d].stream_id===t[c].stream_id){r[d].extra_info!==t[c].extra_info&&a.push(r[d]),i=!0;break}i||n.push(r[d])}for(var u=0;u<t.length;u++){i=!1;for(var E=0;E<r.length;E++)if(t[u].stream_id===r[E].stream_id){i=!0;break}i||s.push(t[u])}t.splice(0);for(d=0;d<r.length;d++)t.push(r[d]);o(n,s,a)},e.checkInteger=function(e,t){return 0==t?"number"==typeof e&&e%1==0&&e>=0:"number"==typeof e&&e%1==0&&e>0},e.checkValidNumber=function(e,t,r){return t=t||1,r=r||1e4,"number"==typeof e&&e%1==0&&e>=t&&e<=r},e.uuid=function(e,t){var r,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=[];if(t=t||o.length,e)for(r=0;r<e;r++)i[r]=o[0|Math.random()*t];else{var n=void 0;for(i[8]=i[13]=i[18]=i[23]="-",i[14]="4",r=0;r<36;r++)i[r]||(n=0|16*Math.random(),i[r]=o[19==r?3&n|8:n])}return i.join("")},e.checkConfigParam=function(e,t){return e.appid&&"number"==typeof e.appid?!e.server||e.server.length<1||"string"!=typeof e.server&&!Array.isArray(e.server)?(t.error("ccp.0 server must be string or string[] and not empty"),!1):!(!e.idName||"string"!=typeof e.idName)||(t.error("ccp.0 idName must be string and not empty"),!1):(t.error("ccp.0 appid must be number"),!1)},e.compareVersion=function(e,t){e=e.split("."),t=t.split(".");for(var r=Math.max(e.length,t.length);e.length<r;)e.push("0");for(;t.length<r;)t.push("0");for(var o=0;o<r;o++){var i=parseInt(e[o]),n=parseInt(t[o]);if(i>n)return 1;if(i<n)return-1}return 0},e.isSupportLive=function(e,t){var r="当前微信版本过低，无法使用相关组件",o="需要摄像头和录音功能的授权",i=wx.getSystemInfoSync().SDKVersion,n={code:-1,msg:""};this.compareVersion(i,"1.7.0")<0&&(n={code:10001,msg:r},e&&e(n)),wx.getSetting({success:function(t){var r=t.authSetting;r["scope.camera"]&&r["scope.record"]||(n={code:10002,msg:o}),e&&e(n)},fail:function(e){console.error("get setting error",e),t&&t(e)}})},e.inlineWorker=function(e){if(Worker&&e){var t=e.toString().trim().match(/^function\s*\w*\s*\([\w\s,]*\)\s*{([\w\W]*?)}$/)[1],r=URL.createObjectURL(new window.Blob([t],{type:"text/javascript"}));return new Worker(r)}return null},e.getBrowser=function(){var e=window.navigator.userAgent,t=null!=window.ActiveXObject&&-1!=e.indexOf("MSIE"),r=-1!=e.indexOf("Firefox"),o=null!=window.opr,i=e.indexOf("Chrome")&&window.chrome,n=-1!=e.indexOf("Safari")&&-1!=e.indexOf("Version");return t?"IE":r?"Firefox":o?"Opera":i?"Chrome":n?"Safari":"Unkown"},e.getPublisherStateType=function(e){return 0==e||1==e?0==e?"PUBLISHING":"NO_PUBLISH":"PUBLISH_REQUESTING"},e.getPlayerStateType=function(e){return 0==e||1==e?0==e?"PLAYING":"NO_PLAY":"PLAY_REQUESTING"},e.getSteamUpdateType=function(e){return 0==e?"DELETE":"ADD"},e.checkCameraParams=function(t,r){return t.width&&e.checkValidNumber(t.width)?t.height&&e.checkValidNumber(t.height)?t.frameRate&&e.checkValidNumber(t.frameRate)?!(!t.bitRate||!e.checkValidNumber(t.bitRate))||(r(o.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," bitrate must be integer number"),!1):(r(o.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," frameRate must be integer number"),!1):(r(o.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," height must be integer number"),!1):(r(o.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," widths must be integer number"),!1)},e.makeCallbackStreamList=function(e){var t=[];if(e&&e.length>0)for(var r=0;r<e.length;r++){var o={anchor_id_name:e[r].anchor_id_name,stream_gid:e[r].stream_gid,anchor_nick_name:e[r].anchor_nick_name,extra_info:e[r].extra_info,stream_id:e[r].stream_id,urls_flv:"",urls_rtmp:"",urls_hls:"",urls_https_flv:"",urls_https_hls:""},i=e[r];o.urls_flv=i.urls_flv,o.urls_hls=i.urls_m3u8,o.urls_https_flv=i.urls_https_flv,o.urls_https_hls=i.urls_https_m3u8,o.urls_rtmp=i.urls_rtmp,t.push(o)}return t},e}();t.ClientUtil=i},function(e,t,r){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},s=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(i,n){function s(e){try{d(o.next(e))}catch(e){n(e)}}function a(e){try{d(o.throw(e))}catch(e){n(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}d((o=o.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var r,o,i,n,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return n={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function a(n){return function(a){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(i=2&n[0]?o.return:n[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,n[1])).done)return i;switch(o=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,o=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==n[0]&&2!==n[0])){s=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){s.label=n[1];break}if(6===n[0]&&s.label<i[1]){s.label=i[1],i=n;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(n);break}i[2]&&s.ops.pop(),s.trys.pop();continue}n=t.call(e,s)}catch(e){n=[6,e],o=0}finally{r=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoClient=void 0;var d=r(3),c=r(7),u=r(8),E=r(9),l=r(0),_=function(e){function t(){var t=e.call(this)||this;return t.stateCenter=new c.StateCenter,t.streamVideoCenter=new u.StreamVideoCenter,t}return i(t,e),t.prototype.enableCamera=function(e,t){if(this.logger.debug("zl.p.ec.0 call"),"boolean"!=typeof t)return this.logger.error("zl.p.ec.0 argument is not bool"),!1;var r=this.streamVideoCenter.checkPublishVideo(e);return r?this.zegoEntity.mutePublishStreamVideo(r.mediaStream,!t):(this.logger.info("zl.p.ec.0 video not found"),!1)},t.prototype.enableMicrophone=function(e,t){if(this.logger.debug("zl.p.em.0 call"),"boolean"!=typeof t)return this.logger.error("zl.p.em.0 argument is not bool"),!1;var r=this.streamVideoCenter.checkPublishVideo(e);return r?this.zegoEntity.mutePublishStreamAudio(r.mediaStream,!t):(this.logger.info("zl.p.em.0 video not found"),!1)},t.prototype.setLocalAudioOutput=function(e,t){return this.logger.debug("zl.p.slao call"),"string"!=typeof t?(console.error("audiooutput is not string"),!1):this.streamVideoCenter.setStreamAudioOutput(e,t)},t.prototype.setPlayAudioOutput=function(e,t){return this.logger.debug("zl.p.spao call"),"string"!=typeof t?(console.error("audiooutput is not string"),!1):this.streamVideoCenter.setPlayStreamAudioOutput(e,t)},t.prototype.setCustomSignalUrl=function(e){this.logger.debug("zl.p.scs.0 call: "+e),this.zegoEntity.zegoWebRTC.setCustomSignalUrl(e)},t.prototype.setQualityMonitorCycle=function(e){"number"==typeof e&&e>=1e3&&this.zegoEntity.zegoWebRTC.rtcModules.streamCenter.setQualityMonitorCycle(e)},t.prototype.startPlayingStream=function(e,t,r,o){var i=this;if(this.logger.info("zl.p.sps.0 call streamid "+e),!t)return this.logger.error("zl.p.sps.0 don't have remoteVideo"),!1;t.oncanplay=function(){i.onVideoSizeChanged(e,t.videoWidth,t.videoHeight)};var n={};if(o&&o.resourceMode&&(n.resourceMode=o.resourceMode),o&&o.streamParams&&(n.streamParams=o.streamParams),o&&o.videoDecodeType&&(n.videoCodec=o.videoDecodeType),o&&o.playType)switch(o.playType){case"all":n.video=!0,n.audio=!0;break;case"video":n.audio=!1;break;case"audio":n.video=!1}return this.zegoEntity.zegoWebRTC.rtcModules.playModule._startPlayingStream(e,n,(function(o){t.srcObject=o,r&&i.setLocalAudioOutput(t,r),i.streamVideoCenter.playVideoStreamList.push({streamID:e,video:t,mediaStream:o})}))},t.prototype.stopPlayingStream=function(e){return this.logger.info("zl.p.sps.1.0 call"),this.zegoEntity.stopPlayingStream(e),this.streamVideoCenter.playVideoStreamList=this.streamVideoCenter.playVideoStreamList.filter((function(t){return t.streamID!==e})),!0},t.prototype.startPreview=function(e,t,r,o){var i=this;return this.logger.info("zl.p.sp.0 call"),e?t.externalMediaStream?(this.zegoEntity.createStream({custom:{source:t.externalMediaStream,bitrate:t.bitRate&&t.bitRate,audioBitrate:t.audioBitRate&&t.audioBitRate/1e3,channelCount:t.channelCount}}).then((function(t){i.streamVideoCenter.publishVideoStreamList.push({video:e,mediaStream:t}),r()})).catch((function(e){o(e)})),!0):t.externalCapture?(this.zegoEntity.createStream({custom:{source:e,bitrate:t.bitRate&&t.bitRate,audioBitrate:t.audioBitRate&&t.audioBitRate/1e3,channelCount:t.channelCount}}).then((function(t){i.streamVideoCenter.publishVideoStreamList.push({video:e,mediaStream:t}),r()})).catch((function(e){o(e)})),!0):(this.zegoEntity.createStream({camera:{audio:t.audio,audioInput:t.audioInput,video:t.video,videoInput:t.videoInput,videoQuality:t.videoQuality,facingMode:t.facingMode,channelCount:t.channelCount,ANS:t.noiseSuppression,AGC:t.autoGainControl,AEC:t.echoCancellation,width:t.width,height:t.height,frameRate:t.frameRate,bitrate:t.bitRate&&t.bitRate,audioBitrate:t.audioBitRate&&t.audioBitRate/1e3,horizontal:![1,2,3].includes(t.videoQuality||2),isSwitch:t.horizontal}}).then((function(t){e.srcObject=t,i.streamVideoCenter.publishVideoStreamList.push({video:e,mediaStream:t}),r()})).catch((function(e){o(e)})),!0):(this.logger.error("zl.p.sp.0 no localVideo"),!1)},t.prototype.stopPreview=function(e){if(this.logger.debug("zl.p.sp.1.0 call"),!e)return this.logger.info("zl.p.sp.1.0 param error"),!1;var t=this.streamVideoCenter.checkPublishVideo(e);return t?(this.zegoEntity.destroyStream(t.mediaStream),this.streamVideoCenter.removePublishVideo(e),e.srcObject=null,!0):(this.logger.info("zl.p.sp.1.0 video not found"),!1)},t.prototype.startPublishingStream=function(e,t,r,o){if(this.logger.info("zl.p.sps.1 call streamid: "+e),!t)return this.logger.info("zl.p.sp.1 param error"),!1;var i=this.streamVideoCenter.checkPublishVideo(t);return i?(this.zegoEntity.startPublishingStream(e,i.mediaStream,{streamParams:o&&o.streamParams,extraInfo:null===r?"":r,videoCodec:o&&o.videoDecodeType,cdnUrl:o&&o.cdnUrl}),!0):(this.logger.info("zl.p.sp.1 video not found"),!1)},t.prototype.stopPublishingStream=function(e){return this.zegoEntity.stopPublishingStream(e)},t.prototype.preloadEffect=function(e,t,r){e&&"number"==typeof e&&t&&"string"==typeof t?this.zegoEntity.zegoWebRTC.preloadEffect(e+"",t,r):this.logger.error("zl.pe.0 params error")},t.prototype.playEffect=function(e,t,r){if(e.streamId&&"string"==typeof e.streamId&&e.effectId&&"number"==typeof e.effectId){var o={loop:e.loop,playTime:e.playTime,replace:e.replace,streamID:e.streamId,effectID:e.effectId+""};this.zegoEntity.zegoWebRTC.playEffect(o,t,r)}else this.logger.error("zl.pe.1 params error")},t.prototype.pauseEffect=function(e){e&&"string"==typeof e?this.zegoEntity.zegoWebRTC.pauseEffect(e):this.logger.error("zl.pe.2 streamid format error")},t.prototype.stopEffect=function(e){e&&"string"==typeof e?this.zegoEntity.zegoWebRTC.stopEffect(e):this.logger.error("zl.re.0 streamid format error")},t.prototype.resumeEffect=function(e){e&&"string"==typeof e?this.zegoEntity.zegoWebRTC.resumeEffect(e):this.logger.error("zl.re.0 streamid format error")},t.prototype.unloadEffect=function(e){return e&&"number"==typeof e?this.zegoEntity.zegoWebRTC.unloadEffect(e+""):(this.logger.error("zl.ue.0 params error"),!1)},t.prototype.startMixingAudio=function(e,t,r){return this.logger.debug("zl.sma.0 call"),e&&"string"==typeof e?t?Array.isArray(t)&&0!==t.length?(this.streamVideoCenter.audio=t,this.zegoEntity.startMixingAudio(e,t)):t instanceof HTMLMediaElement?(this.streamVideoCenter.audio=[t],this.zegoEntity.startMixingAudio(e,[t])):(this.logger.error("zl.sma.0 audio param type error"),!1):(this.logger.error("zl.sma.0 no audio"),!1):(this.logger.error("zl.sma.0 stream id type error"),!1)},t.prototype.stopMixingAudio=function(e,t){if(!e||"string"!=typeof e)return this.logger.error("zl.sma.1 param streamID format error"),!1;if(this.zegoEntity.zegoWebRTC.stopEffect(e),Array.isArray(t)&&0!==t.length){var r=this.zegoEntity.stopMixingAudio(e,t);return this.streamVideoCenter.audio=this.streamVideoCenter.audio.filter((function(e){return t.every((function(t){return t!==e}))})),r}if(void 0===t){r=this.zegoEntity.stopMixingAudio(e,this.streamVideoCenter.audio);return this.streamVideoCenter.audio=[],r}return this.logger.info("zl.sma.0 no audio"),!1},t.prototype.setMixingAudioVolume=function(e,t){var r=this;return this.logger.debug("zl.sma.2 call"),!e||"string"!=typeof e||"number"!=typeof t||t<0||t>100?(this.logger.error("zl.sma.2 param error"),!1):(Array.isArray(this.streamVideoCenter.audio)&&0!==this.streamVideoCenter.audio.length&&this.streamVideoCenter.audio.forEach((function(o){r.zegoEntity.setMixingAudioVolume(e,t,o)})),this.zegoEntity.zegoWebRTC.rtcModules.audioMixModule.setEffectVolume(e,t))},t.prototype.startScreenShotChrome=function(e){var t=this;this.zegoEntity.createStream({screen:{audio:!1,type:"shot"}}).then((function(r){t.streamVideoCenter.screenShotStreamList.push({stream:r}),e(!0,r)})).catch((function(t){e(!1,null,t)}))},t.prototype.startScreenSharing=function(e,t,r){var o=this;this.zegoEntity.createStream({screen:{audio:t,width:e.width,height:e.height,frameRate:e.frameRate,type:"sharing"}}).then((function(e){o.streamVideoCenter.screenShotStreamList.push({stream:e}),r(!0,e)})).catch((function(e){r(!1,null,e)}))},t.prototype.startScreenShotFirFox=function(e,t,r,o){var i=this;this.zegoEntity.createStream({screen:{audio:r,width:e.width,height:e.height,frameRate:e.frameRate,type:"firefox"}}).then((function(e){i.streamVideoCenter.screenShotStreamList.push({stream:e}),o(!0,e)})).catch((function(e){o(!1,null)}))},t.prototype.stopScreenShot=function(e){var t=this;void 0===e?this.streamVideoCenter.screenShotStreamList.forEach((function(e){t.zegoEntity.destroyStream(e.stream)})):this.zegoEntity.destroyStream(e)},t.prototype.switchDevice=function(e,t,r,o,i){if("audio"!==e&&"video"!==e||"string"!=typeof r)this.logger.error("zg.sd.0 param error");else{var n=this.streamVideoCenter.checkPublishVideo(t);n?"video"===e?this.zegoEntity.useVideoDevice(n.mediaStream,r).then((function(){o&&o()})).catch((function(e){i&&i(e)})):this.zegoEntity.useAudioDevice(n.mediaStream,r).then((function(){o&&o()})).catch((function(e){i&&i(e)})):this.logger.info("zl.p.sp.1 video not found")}},t.prototype.filterStreamList=function(e){var t={},r={},o={},i=[],n=0,s=this.zegoEntity.zegoWebRTC.stateCenter.streamList;for(var a in s.forEach((function(t,r){t.stream_id==e&&(n=r)})),s[n])"urls_flv"!=a&&"urls_https_flv"!=a||(t[a]=s[n][a]),"urls_m3u8"!=a&&"urls_https_m3u8"!=a||(r[a]=s[n][a]),"urls_rtmp"==a&&(o[a]=s[n][a]);var d=window.location.protocol,c=window.navigator.userAgent;if(/Safari/.test(c)&&!/Chrome/.test(c))for(var a in r)r[a]&&r[a].forEach((function(e){-1!==e.indexOf(d)&&i.push(e)}));else if("http:"==d)for(var a in t)t[a]&&t[a].forEach((function(e){-1===e.indexOf("http")&&-1===e.indexOf("https")||i.push(e)}));else if("https:"==d)for(var a in t)t[a]&&t[a].forEach((function(e){-1!==e.indexOf(d)&&i.push(e)}));else if("rtmp:"==d)for(var a in o)o[a]&&o[a].forEach((function(e){-1!==e.indexOf(d)&&i.push(e)}));return i.filter((function(e,t,r){return r.indexOf(e)==t}))},t.prototype.setPublishStreamConstraints=function(e,t,r,o){this.logger.info("zl.spsc.0 call");var i=this.zegoEntity.zegoWebRTC.rtcModules.streamCenter.publisherList[e];if(i&&i.localStream){var n=[];(t.width||t.height||t.frameRate||t.bitRate)&&n.push(this.zegoEntity.setVideoConfig(i.localStream,{width:t.width,height:t.height,frameRate:t.frameRate,maxBitrate:t.bitRate.maxBitRate})),(t.noiseSuppression||t.autoGainControl||t.echoCancellation)&&this.zegoEntity.setAudioConfig(i.localStream,{ANS:t.noiseSuppression,AGC:t.autoGainControl,AEC:t.echoCancellation}),Promise.all(n).then((function(){r()})).catch((function(e){o(e)}))}else this.logger.error("zl.spsc.0 publish not exist")},t.prototype.setSoundLevelDelegate=function(e,t){this.logger.info("zl.ssd.0 call"),this.zegoEntity.setSoundLevelDelegate(e,t)},t.supportDetection=function(e,t){navigator&&navigator.mediaDevices&&(this.screenShotReady||"getDisplayMedia"in navigator.mediaDevices)?l.ClientUtil.supportDetection(!0,(function(t){e({webRtc:t.webRTC,capture:t.customCapture,videoDecodeType:t.videoCodec,screenSharing:t.screenSharing,camera:t.camera,microphone:t.microphone})}),0):l.ClientUtil.supportDetection(!1,(function(t){e({webRtc:t.webRTC,capture:t.customCapture,videoDecodeType:t.videoCodec,screenSharing:t.screenSharing})}),0)},t.prototype.enumDevices=function(e,r){t.enumDevices(e,r)},t.enumDevices=function(e,t){void 0!==navigator.mediaDevices&&void 0!==navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then((function(t){for(var r=[],o=[],i=[],n=0;n<t.length;n++){var s=t[n];"audioinput"===s.kind&&r.push({label:s.label,deviceId:s.deviceId}),"audiooutput"===s.kind&&o.push({label:s.label,deviceId:s.deviceId}),"videoinput"===s.kind&&i.push({label:s.label,deviceId:s.deviceId})}e&&e({microphones:r,speakers:o,cameras:i})})).catch((function(e){t&&t(e)})):t&&t("browser don't support enumerate devices")},t.getAudioInfo=function(e,t,r){if(!e.srcObject)return console.error("srcObject is empty!"),null;var o=n({},r);return new E.MediaUtil(o).connectToSource(e.srcObject,(function(e){t(e)}))},t.handleDataAvailable=function(e){e.data&&e.data.size>0&&t.recordedBlobs.push(e.data)},t.startRecord=function(e,r,o){return s(this,void 0,void 0,(function(){var i,n;return a(this,(function(s){switch(s.label){case 0:return console.error("startRecord",MediaRecorder),t.recordedBlobs=[],n={mimeType:"video/webm;codecs=vp9"},MediaRecorder.isTypeSupported(n.mimeType)||(n={mimeType:"video/webm;codecs=vp8"},MediaRecorder.isTypeSupported(n.mimeType)||(n={mimeType:"video/webm"},MediaRecorder.isTypeSupported(n.mimeType)||(n={mimeType:""}))),r&&r.audio?(n={mimeType:"audio/webm"},MediaRecorder.isTypeSupported(n.mimeType)||(n={mimeType:""}),[4,navigator.mediaDevices.getUserMedia({audio:{deviceId:r.audioInput?r.audioInput:""}})]):[3,2];case 1:return i=s.sent(),t.recordType="audio",[3,3];case 2:i=e.captureStream(),s.label=3;case 3:try{t.mediaRecorder=new MediaRecorder(i,n)}catch(e){return console.error("Exception while creating MediaRecorder:",e),o&&o(e),[2]}return t.mediaRecorder.onstop=function(e){console.log("Recorder stopped: ",e),r&&r.audio&&i.getTracks().forEach((function(e){return e.stop()}))},t.mediaRecorder.ondataavailable=t.handleDataAvailable,t.mediaRecorder.start(10),o&&o(),[2]}}))}))},t.stopRecord=function(){t.mediaRecorder?t.mediaRecorder.stop():console.warn("please invoke startRecord first")},t.resumeRecord=function(){t.mediaRecorder?t.mediaRecorder.resume():console.warn("please invoke startRecord first")},t.pauseRecord=function(){t.mediaRecorder?t.mediaRecorder.pause():console.warn("please invoke startRecord first")},t.saveRecord=function(e){if(t.mediaRecorder&&t.recordedBlobs){var r=new Blob(t.recordedBlobs,{type:"video"===t.recordType?"video/webm":"audio/webm"}),o=window.URL.createObjectURL(r);if("string"==typeof e&&""!==e){var i=document.createElement("a");i.style.display="none",i.href=o,i.download=e+".webm",document.body.appendChild(i),i.click(),setTimeout((function(){document.body.removeChild(i),window.URL.revokeObjectURL(o)}),100)}return o}console.warn("please invoke startRecord first")},t.resumeRecordAudio=function(){t.mediaRecorder?t.mediaRecorder.resume():console.warn("please invoke startRecordAudio first")},t.pauseRecordAudio=function(){t.mediaRecorder?t.mediaRecorder.pause():console.warn("please invoke startRecordAudio first")},t.getRecordAudio=function(){if(t.mediaRecorder&&t.recordedBlobs){var e=new Blob(t.recordedBlobs);return window.URL.createObjectURL(e)}console.warn("please invoke startRecordAudio first")},t.takeSnapShot=function(e,t){if(e&&0!==e.videoHeight){var r=document.createElement("canvas");r.width=e.videoWidth,r.height=e.videoHeight,r.getContext("2d").drawImage(e,0,0,r.width,r.height),t.src=r.toDataURL("image/jpeg")}else console.error("video can not empty")},t.saveSnapShot=function(e,t){if(e&&0!==e.videoHeight){var r=document.createElement("canvas");r.width=e.videoWidth,r.height=e.videoHeight,r.getContext("2d").drawImage(e,0,0,r.width,r.height),r.toBlob((function(e){var r=window.URL.createObjectURL(e),o=document.createElement("a");o.style.display="none",o.href=r,o.download=t+".jpeg",document.body.appendChild(o),o.click(),setTimeout((function(){document.body.removeChild(o),window.URL.revokeObjectURL(r)}),100)}))}else console.error("video can not empty")},t.screenShotReady=!1,t.recordType="video",t}(d.BaseCenter);t.ZegoClient=_},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseCenter=void 0;var o=r(4),i=r(0),n=r(1),s=function(){function e(){}return e.prototype.config=function(e){return this.stateCenter.appid=e.appid,this.zegoEntity=new i.ZegoExpressEngine(e.appid,e.server),this.logger=this.zegoEntity.logger,this.streamVideoCenter.logger=this.logger,this.logger.info("zb.cm.cf call"),n.ClientUtil.checkConfigParam(e,this.logger)?(this.listen(),this.logger.info("zl.cm.cf server "+JSON.stringify(e.server)),this.stateCenter.idName=e.idName,this.stateCenter.nickName=e.nickName,this.zegoEntity.setLogConfig({logLevel:o.LOG_LEVEL[e.logLevel],remoteLogLevel:o.LOG_LEVEL[e.remoteLogLevel],logURL:e.logUrl}),!1===e.audienceCreateRoom&&this.zegoEntity.zegoWebRTM.setRoomCreateFlag(0),"boolean"==typeof e.debugVerbose&&(this.stateCenter.debugVerbose=e.debugVerbose),this.zegoEntity.setDebugVerbose(this.stateCenter.debugVerbose),!0):(this.logger.error("zb.cm.cf param error"),!1)},e.prototype.login=function(e,t,r,o,i){var s=this;this.logger.info("zl.rh.lg call"),this.stateCenter.streamUpdated=!1,this.zegoEntity.zegoWebRTM.setRole(t),this.zegoEntity.loginRoom(e,r,{userID:this.stateCenter.idName,userName:this.stateCenter.nickName},{userUpdate:this.stateCenter.userStateUpdate}).then((function(t){s.stateCenter.roomid=e,setTimeout((function(){s.stateCenter.streamUpdated=!0,o(n.ClientUtil.makeCallbackStreamList(s.zegoEntity.zegoWebRTC.stateCenter.streamList))}),0)})).catch((function(e){i(e)}))},e.prototype.loginWithAuthor=function(e,t,r,o,i,s){var a=this;"string"!=typeof e||"string"!=typeof r||"string"!=typeof o||1!==t&&2!==t?this.logger.error("zl.rh.lg params error"):(this.zegoEntity.zegoWebRTM.setRole(t),this.zegoEntity.loginRoom(e,o,{userID:this.stateCenter.idName,userName:this.stateCenter.nickName},{userUpdate:this.stateCenter.userStateUpdate}).then((function(e){setTimeout((function(){i(n.ClientUtil.makeCallbackStreamList(a.zegoEntity.zegoWebRTC.stateCenter.streamList))}),0)})).catch((function(e){s(e)})))},e.prototype.logout=function(){return this.logger.info("zc.lg.0 call"),this.zegoEntity.logoutRoom(),!0},e.prototype.setUserStateUpdate=function(e){"boolean"==typeof e?this.stateCenter.userStateUpdate=e:console.error("setUserStateUpdate param error")},e.prototype.onUserStateUpdate=function(e,t){},e.prototype.onGetTotalUserList=function(e,t){},e.prototype.onUpdateOnlineCount=function(e,t){},e.prototype.onGetAnchorInfo=function(e,t){},e.prototype.release=function(){this.logger.debug("zl.cm.rl call"),this.zegoEntity.logoutRoom()},e.prototype.sendCustomCommand=function(e,t,r,o){return"string"!=typeof t&&"object"!=typeof t?(this.logger.error("zl.mh.scc params error"),!1):(this.zegoEntity.zegoWebRTM._sendCustomCommand(this.stateCenter.roomid,JSON.stringify(t),e).then((function(e){r(e.seq,JSON.stringify(t))})).catch((function(e){o({code:e.errorCode,msg:e.extendedData},e.seq,JSON.stringify(t))})),!0)},e.prototype.onRecvCustomCommand=function(e,t,r){},e.prototype.sendRoomMsg=function(e,t,r,i,n){return 1!==e&&2!==e?(this.logger.error("zl.srm category must be number 1 or 2"),void n(o.sdkErrorList.PARAM)):1!==e&&2!==e&&3!==e?(this.logger.error("zl.srm type must be number 1 or 2 or 3"),void n(o.sdkErrorList.PARAM)):"string"!=typeof r?(this.logger.error("zl.srm msg content must be string"),void n(o.sdkErrorList.PARAM)):void this.zegoEntity.zegoWebRTM._sendBroadcastMessage(this.stateCenter.roomid,r,e,t).then((function(o){i(o.seq,o.messageID,e,t,r)})).catch((function(o){n({code:o.errorCode,msg:o.extendedData},o.seq,e,t,r)}))},e.prototype.onRecvRoomMsg=function(e,t,r){},e.prototype.sendReliableMessage=function(e,t,r,o){this.zegoEntity.zegoWebRTM._setRoomExtraInfo(this.stateCenter.roomid,e,t).then((function(e){r(e.seq)})).catch((function(e,t){o(e,t)}))},e.prototype.onRecvReliableMessage=function(e,t,r){},e.prototype.sendBigRoomMessage=function(e,t,r,o,i){this.zegoEntity.zegoWebRTM._sendBarrageMessage(this.stateCenter.roomid,r,e,t).then((function(e){o(e.seq,e.messageID)})).catch((function(e){i({code:e.errorCode,msg:e.extendedData},e.seq)}))},e.prototype.onRecvBigRoomMessage=function(e,t){},e.prototype.sendRelayMessage=function(e,t,r,o){this.zegoEntity.zegoWebRTM.sendRelayMessage(e,t,r,o)},e.prototype.requestJoinLive=function(e,t,r,o){return this.zegoEntity.zegoWebRTM.requestJoinLive(e,t,r,o)},e.prototype.onRecvJoinLiveRequest=function(e,t,r,o){},e.prototype.inviteJoinLive=function(e,t,r,o){return this.zegoEntity.zegoWebRTM.inviteJoinLive(e,t,r,o)},e.prototype.onRecvInviteJoinLiveRequest=function(e,t,r,o){},e.prototype.endJoinLive=function(e,t,r){return this.zegoEntity.zegoWebRTM.endJoinLive(e,t,r)},e.prototype.onRecvEndJoinLiveCommand=function(e,t,r,o){},e.prototype.respondJoinLive=function(e,t,r,o){return this.zegoEntity.zegoWebRTM.respondJoinLive(e,t,r,o)},e.prototype.updateMixStream=function(e,t,r){var o=this,i=e.streamList.map((function(e){return{streamID:e.streamId,contentType:"VIDEO",layout:{top:e.top,left:e.left,bottom:e.bottom,right:e.right}}}));return this.zegoEntity.setMixerTaskConfig({backgroundColor:e.outputBgColor,backgroundImage:e.outputBgImage,extraParams:e.extraParams}).then((function(){o.zegoEntity.startMixerTask({inputList:i,outputList:[{target:e.outputStreamId?e.outputStreamId:e.outputUrl}],outputConfig:{outputBitrate:e.outputBitrate/1e3,outputFPS:e.outputFps,outputWidth:e.outputWidth,outputHeight:e.outputHeight,outputAudioCodecID:e.outputAudioConfig,outputAudioBitrate:e.outputAudioBitrate&&e.outputAudioBitrate/1e3,outputAudioChannels:e.outputAudioChannels},noTaskID:!0}).then((function(r){if(r.extendedData){var o=JSON.parse(r.extendedData).mixerOutputList,i=[];o.forEach((function(e){i.push({rtmpUrls:[e.rtmpURL],hlsUrls:[e.hlsURL],flvUrls:[e.flvURL]})})),t(e.outputStreamId,i)}})).catch((function(e){r(e)}))})),!0},e.prototype.stopMixStream=function(e,t,r){return this.zegoEntity.zegoWebRTC.rtcModules.streamHandler.stopMixStream(void 0,t,r,e.outputStreamId,e.outputUrl)},e.prototype.publishTarget=function(e,t,r){this.zegoEntity.zegoWebRTC.rtcModules.streamHandler.publishTarget({type:e.type,streamID:e.streamId,pushUrl:e.pushUrl}).then((function(e){t()})).catch((function(e){r({code:e.errorCode,message:e.extendedData})}))},e.prototype.updateStreamExtraInfo=function(e,t){return this.zegoEntity.zegoWebRTC.rtcModules.streamHandler._setStreamExtraInfo(e,t)},e.prototype.onStreamUrlUpdate=function(e,t,r){},e.prototype.onStreamUpdated=function(e,t){},e.prototype.onStreamExtraInfoUpdated=function(e){},e.prototype.onPlayStateUpdate=function(e,t,r){},e.prototype.onVideoSizeChanged=function(e,t,r){},e.prototype.onRemoteCameraStatusUpdate=function(e,t){},e.prototype.onRemoteMicStatusUpdate=function(e,t){},e.prototype.onPlayQualityUpdate=function(e,t){},e.prototype.onPublishStateUpdate=function(e,t,r){},e.prototype.onPublishQualityUpdate=function(e,t){},e.prototype.onSoundLevelUpdate=function(e){},e.prototype.onDeviceError=function(e){},e.prototype.OnAudioDeviceStateChanged=function(e){},e.prototype.OnVideoDeviceStateChanged=function(e){},e.prototype.onScreenSharingEnded=function(e){},e.prototype.onDisconnect=function(e){},e.prototype.onKickOut=function(e){},e.prototype.onTempBroken=function(){},e.prototype.onReconnect=function(){},e.getCurrentVersion=function(){return o.PROTO_VERSION},e.prototype.changeStream=function(e){return e.map((function(e){return{anchor_id_name:e.user.userID,stream_gid:e.streamGID,anchor_nick_name:e.user.userName,extra_info:e.extraInfo,stream_id:e.streamID,urls_flv:[e.urlFlv],urls_rtmp:[e.urlRtmp],urls_hls:[e.urlHls],urls_https_flv:e.urlHttpsFlv,urls_https_hls:e.urlHttpsHls}}))},e.prototype.listen=function(){var e=this;this.zegoEntity.on("_getTotalUserList",(function(t,r){e.onGetTotalUserList(t,r)})),this.zegoEntity.on("_userStateUpdate",(function(t,r){e.onUserStateUpdate(t,r)})),this.zegoEntity.on("IMRecvCustomCommand",(function(t,r,o){e.onRecvCustomCommand(r.userID,r.userName||"",o)})),this.zegoEntity.on("recvJoinLiveRequest",(function(t,r,o,i){e.onRecvJoinLiveRequest(t,r,o,i)})),this.zegoEntity.on("recvInviteJoinLiveRequest",(function(t,r,o,i){e.onRecvInviteJoinLiveRequest(t,r,o,i)})),this.zegoEntity.on("recvEndJoinLiveCommand",(function(t,r,o,i){e.onRecvEndJoinLiveCommand(t,r,o,i)})),this.zegoEntity.on("_recvRoomMsg",(function(t,r,o){e.onRecvRoomMsg(t,r,o)})),this.zegoEntity.on("_recvBigRoomMessage",(function(t,r){e.onRecvBigRoomMessage(t,r)})),this.zegoEntity.on("recvReliableMessage",(function(t,r,o){e.onRecvReliableMessage(t,r,o)})),this.zegoEntity.on("_getAnchorInfo",(function(t,r){e.onGetAnchorInfo(t,r)})),this.zegoEntity.on("roomOnlineUserCountUpdate",(function(t,r){e.onUpdateOnlineCount(t,r)})),this.zegoEntity.on("roomStateUpdate",(function(t,r,i,n){"DISCONNECTED"===r?0!==i&&e.onDisconnect(o.sdkErrorList.LOGIN_DISCONNECT):"CONNECTED"===r?e.onReconnect():"CONNECTING"===r&&e.onTempBroken()})),this.zegoEntity.on("_kickout",(function(t){e.onKickOut(t)})),this.zegoEntity.on("soundLevelUpdate",(function(t){e.onSoundLevelUpdate(t)})),this.zegoEntity.on("videoDeviceStateChanged",(function(t,r){e.OnVideoDeviceStateChanged({deviceInfo:r,state:t})})),this.zegoEntity.on("audioDeviceStateChanged",(function(t,r,o){e.OnAudioDeviceStateChanged({deviceType:r,deviceInfo:o,state:t})})),this.zegoEntity.on("_deviceError",(function(t,r,o){e.onDeviceError({deviceName:r,deviceType:o,errorCode:t})})),this.zegoEntity.on("_remoteCameraStatusUpdate",(function(t,r){e.streamVideoCenter.playVideoStreamList.forEach((function(e){e.streamID===t&&(e.video.srcObject=e.mediaStream)})),e.onRemoteCameraStatusUpdate(t,r)})),this.zegoEntity.on("_remoteMicStatusUpdate",(function(t,r){e.onRemoteMicStatusUpdate(t,r)})),this.zegoEntity.on("_streamUpdated",(function(t,r){e.stateCenter.streamUpdated&&e.onStreamUpdated(1==t?0:1,e.changeStream(r))})),this.zegoEntity.on("streamExtraInfoUpdate",(function(t,r){var o=r.map((function(e){return{stream_id:e.streamID,anchor_id_name:e.user.userID,anchor_nick_name:e.user.userName,extra_info:e.extraInfo}}));e.onStreamExtraInfoUpdated(o)})),this.zegoEntity.on("playerStateUpdate",(function(t){("NO_PLAY"!==t.state&&"PLAY_REQUESTING"!==t.state||0!==t.errorCode)&&e.onPlayStateUpdate(o.PlayStreamState[t.state],t.streamID,{code:t.errorCode,msg:t.extendedData})})),this.zegoEntity.on("playQualityUpdate",(function(t,r){var o={audioBitrate:r.audio.audioBitrate,audioCodeType:r.audio.audioCodec,audioSamplingRate:r.audio.audioSamplingRate,audioSendLevel:r.audio.audioSendLevel,frameHeight:r.video.frameHeight,frameWidth:r.video.frameWidth,audioJitter:r.audio.audioJitter,videoBitrate:r.video.videoBitrate,videoFPS:r.video.videoFPS,videoTransferFPS:r.video.videoTransferFPS,audioFPS:r.audio.audioFPS,nackCount:r.nackCount,pliCount:r.pliCount,currentRoundTripTime:r.currentRoundTripTime,totalRoundTripTime:r.totalRoundTripTime,audioQuality:r.audio.audioQuality,videoQuality:r.video.videoQuality,videoFramesDropped:r.video.videoFramesDropped};e.onPlayQualityUpdate(t,o)})),this.zegoEntity.on("publisherStateUpdate",(function(t){("NO_PUBLISH"!==t.state&&"PUBLISH_REQUESTING"!==t.state||0!==t.errorCode)&&e.onPublishStateUpdate(o.PublishStreamState[t.state],t.streamID,{code:t.errorCode,msg:t.extendedData})})),this.zegoEntity.on("publishQualityUpdate",(function(t,r){var o={audioBitrate:r.audio.audioBitrate,audioCodeType:r.audio.audioCodec,frameHeight:r.video.frameHeight,frameWidth:r.video.frameWidth,videoBitrate:r.video.videoBitrate,videoFPS:r.video.videoFPS,videoTransferFPS:r.video.videoTransferFPS,audioFPS:r.audio.audioFPS,nackCount:r.nackCount,pliCount:r.pliCount,currentRoundTripTime:r.currentRoundTripTime,totalRoundTripTime:r.totalRoundTripTime,audioQuality:r.audio.audioQuality};e.onPublishQualityUpdate(t,o)})),this.zegoEntity.on("screenSharingEnded",(function(t){e.onScreenSharingEnded(t)}))},e}();t.BaseCenter=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.E_CLIENT_TYPE=t.ENUM_DISPATCH_TYPE=t.ENUM_BROADCASTER_STATUS=t.ENUM_PLAY_SOURCE_TYPE=t.ENUM_PUSH_SIGNAL_SUB_CMD=t.ENUM_SIGNAL_SUB_CMD=t.PublishStreamState=t.PlayStreamState=t.QUALITYLEVEL=t.MIXSTREAM_ERROR_CODE=t.SERVER_ERROR_CODE=t.ENUM_STREAM_UPDATE_CMD=t.MINIUM_HEARTBEAT_INTERVAL=t.ENUM_PLAY_STATE_UPDATE=t.ENUM_PUBLISH_STATE_UPDATE=t.ENUM_NETWORK_STATE=t.ENUM_RUN_STATE=t.ENUM_STREAM_UPDATE_TYPE=t.ENUM_STREAM_SUB_CMD=t.ENUM_PUBLISH_STREAM_STATE=t.MAX_TRY_HEARTBEAT_COUNT=t.SEND_MSG_TIMEOUT=t.SEND_MSG_RESET=t.MAX_TRY_CONNECT_COUNT=t.ENUM_CONNECT_STATE=t.ENUM_PLAY_STATE_NEGO=t.ENUM_PLAY_STATE=t.ENUM_PUBLISH_STATE_NEGO=t.ENUM_PUBLISH_STATE=t.ENUM_RETRY_STATE=t.ENUM_RESOLUTION_TYPE=t.ENUM_SIGNAL_STATE=t.sdkErrorList=t.ENUM_REMOTE_TYPE=t.ENUM_LOG_LEVEL=t.LOG_LEVEL=t.ROOMVERSION=t.PROTO_VERSION=void 0,t.PROTO_VERSION="2.2.0",t.ROOMVERSION="V1",t.LOG_LEVEL={0:"debug",1:"info",2:"warn",3:"error",99:"report",100:"disable"},function(e){e[e.debug=0]="debug",e[e.info=1]="info",e[e.warn=2]="warn",e[e.error=3]="error",e[e.report=99]="report",e[e.disable=100]="disable"}(t.ENUM_LOG_LEVEL||(t.ENUM_LOG_LEVEL={})),function(e){e[e.disable=0]="disable",e[e.websocket=1]="websocket",e[e.https=2]="https"}(t.ENUM_REMOTE_TYPE||(t.ENUM_REMOTE_TYPE={})),t.sdkErrorList={SUCCESS:{code:"ZegoClient.Success",msg:"success."},PARAM:{code:"ZegoClient.Error.Param",msg:"input error."},HEARTBEAT_TIMEOUT:{code:"ZegoClient.Error.Timeout",msg:"heartbeat timeout."},LOGIN_TIMEOUT:{code:"ZegoClient.Error.Timeout",msg:"login timeout."},SEND_MSG_TIMEOUT:{code:"ZegoClient.Error.Timeout",msg:"send customsg timeout."},RESET_QUEUE:{code:"ZegoClient.Error.Timeout",msg:"msg waiting ack is clear when reset."},LOGIN_DISCONNECT:{code:"ZegoClient.Error.Network",msg:"network is broken and login fail."},KICK_OUT:{code:"ZegoClient.Error.Kickout",msg:"kickout reason="},UNKNOWN:{code:"ZegoClient.Error.Unknown",msg:"unknown error."},FREQ_LIMITED:{code:"ZegoClient.Error.requencyLimited",msg:"Frequency Limited."}},function(e){e[e.disconnected=0]="disconnected",e[e.connecting=1]="connecting",e[e.connected=2]="connected"}(t.ENUM_SIGNAL_STATE||(t.ENUM_SIGNAL_STATE={})),t.ENUM_RESOLUTION_TYPE={LOW:{width:240,height:320,frameRate:15,bitRate:300},MEDIUM:{width:480,height:640,frameRate:15,bitRate:800},HIGH:{width:720,height:1280,frameRate:20,bitRate:1500}},t.ENUM_RETRY_STATE={didNotStart:0,retrying:1,finished:2},t.ENUM_PUBLISH_STATE={start:0,waitingSessionRsp:1,waitingOffserRsp:2,waitingServerAnswer:3,waitingServerICE:4,connecting:5,publishing:6,stop:7,didNotStart:8},t.ENUM_PUBLISH_STATE_NEGO={stop:0,start:1,waiterAnswer:2,waitingCandidate:3,sendCandidate:4,iceConnected:5,iceClosed:6,iceFailed:7,iceDisconnected:8},t.ENUM_PLAY_STATE={start:0,waitingSessionRsp:1,waitingOffserRsp:2,waitingServerAnswer:3,waitingServerICE:4,connecting:5,playing:6,stop:7,didNotStart:8},t.ENUM_PLAY_STATE_NEGO={stop:0,start:1,waiterAnswer:2,waitingCandidate:3,sendCandidate:4,iceConnected:5,iceClosed:6,iceFailed:7,iceDisconnected:8},t.ENUM_CONNECT_STATE={disconnect:0,connecting:1,connected:2},t.MAX_TRY_CONNECT_COUNT=1,t.SEND_MSG_RESET=2,t.SEND_MSG_TIMEOUT=1,t.MAX_TRY_HEARTBEAT_COUNT=5,t.ENUM_PUBLISH_STREAM_STATE={waiting_url:1,tryPublish:2,update_info:3,publishing:4,stop:5},t.ENUM_STREAM_SUB_CMD={liveNone:0,liveBegin:2001,liveEnd:2002,liveUpdate:2003},t.ENUM_STREAM_UPDATE_TYPE={added:0,deleted:1},function(e){e[e.logout=0]="logout",e[e.trylogin=1]="trylogin",e[e.login=2]="login"}(t.ENUM_RUN_STATE||(t.ENUM_RUN_STATE={})),function(e){e[e.offline=0]="offline",e[e.online=1]="online"}(t.ENUM_NETWORK_STATE||(t.ENUM_NETWORK_STATE={})),t.ENUM_PUBLISH_STATE_UPDATE={start:0,error:1,retry:2},t.ENUM_PLAY_STATE_UPDATE={start:0,error:1,retry:2},t.MINIUM_HEARTBEAT_INTERVAL=3e3,t.ENUM_STREAM_UPDATE_CMD={added:12001,deleted:12002,updated:12003},t.SERVER_ERROR_CODE=1e4,t.MIXSTREAM_ERROR_CODE=1e4,function(e){e[e.low=1]="low",e[e.stantard=2]="stantard",e[e.hight=3]="hight",e[e.custome=4]="custome"}(t.QUALITYLEVEL||(t.QUALITYLEVEL={})),t.PlayStreamState={PLAYING:0,NO_PLAY:1,PLAY_REQUESTING:2},t.PublishStreamState={PUBLISHING:0,NO_PUBLISH:1,PUBLISH_REQUESTING:2},t.ENUM_SIGNAL_SUB_CMD={none:0,joinLiveRequest:1001,joinLiveResult:1002,joinLiveInvite:1003,joinLiveStop:1004},t.ENUM_PUSH_SIGNAL_SUB_CMD={none:0,pushJoinLiveRequest:11001,pushJoinLiveResult:11002,pushJoinLiveInvite:11003,pushJoinLiveStop:11004},function(e){e[e.auto=0]="auto",e[e.ultra=1]="ultra"}(t.ENUM_PLAY_SOURCE_TYPE||(t.ENUM_PLAY_SOURCE_TYPE={})),function(e){e[e.stop=0]="stop",e[e.start=1]="start"}(t.ENUM_BROADCASTER_STATUS||(t.ENUM_BROADCASTER_STATUS={})),function(e){e[e.cdn=0]="cdn",e[e.ultra=1]="ultra",e[e.customUrl=2]="customUrl"}(t.ENUM_DISPATCH_TYPE||(t.ENUM_DISPATCH_TYPE={})),function(e){e[e.ClientType_None=0]="ClientType_None",e[e.ClientType_H5=1]="ClientType_H5",e[e.ClientType_SmallPragram=2]="ClientType_SmallPragram",e[e.ClientType_Webrtc=3]="ClientType_Webrtc"}(t.E_CLIENT_TYPE||(t.E_CLIENT_TYPE={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoRTCLogEvent=void 0;var o=r(6),i=function(e){return e};t.ZegoRTCLogEvent={kZegoTaskCreateStream:{event:"/sdk/create_stream",error:{kBrowserNotSupportError:o.errorCodeList.PUBLISHER_BROWSER_NOT_SUPPORT,kParamError:o.errorCodeList.PUBLISHER_PARAM,kScreenCancelError:o.errorCodeList.PUBLISH_SCREEN_CANCELED,kScreenFailedError:o.errorCodeList.PUBLISHER_SCREEN_FAILED,kScreenNotSupportError:o.errorCodeList.PUBLISH_SCREEN_NOT_SUPPORT,kHttpsRequiredError:o.errorCodeList.PUBLISHER_HTTPS_REQUIRED},stream_type:i,screen:i,camera:i,custom:i},kZegoTaskPublishStart:{event:"/sdk/api/publish_request",error:{kPublishParamError:o.errorCodeList.PUBLISHER_PARAM,kPublishNetworkTimeoutError:o.errorCodeList.TIMEOUT,kPublishDispatchTimeoutError:o.errorCodeList.DISPATCH_TIMEOUT,kPublishDispatchError:o.errorCodeList.DISPATCH_ERROR,kPublishNetworkBrokenError:o.errorCodeList.NETWORK_BROKEN,kPublishNoPreviewError:o.errorCodeList.PUBLISH_NO_PREVIEW,kPublishNoLoginError:o.errorCodeList.NOT_LOGIN,kPublishRetryTimeoutError:o.errorCodeList.PUBLISHER_RETRY_TIMEOUT,kPublishSessionClosedError:o.errorCodeList.PUBLISHER_SESSION_CLOSED,kPublishNegoTimeoutError:o.errorCodeList.PUBLISHER_SERVER_NEGO_TIMEOUT,kCreateOfferError:o.errorCodeList.PUBLISHER_CREATE_OFFER_ERROR,kSetLocalDescError:o.errorCodeList.PUBLISHER_SET_LOCAL_DESC_ERROR,kSessionRequestError:o.errorCodeList.PUBLISHER_SESSION_REQUEST_FAIL,kSetRemoteDescError:o.errorCodeList.PUBLISHER_SET_REMOTE_DESC_ERROR,kMediaConnectionError:o.errorCodeList.PUBLISHER_MEDIA_CONNECTION_ERROR,kWebsocketDisconnectedError:o.errorCodeList.PUBLISHER_WEBSOCKET_DISCONNECTED,kMediaDescError:o.errorCodeList.PUBLISHER_MEDIA_DESC_ERROR,kCandidateError:o.errorCodeList.PUBLISHER_CANDIDATE_ERROR,kIsPublishing:o.errorCodeList.PUBLISHER_IS_PUBLISHING},publishOption:i,message:i,session_id:i,stream:i,video_en_codec_id:i,cap_w:i,cap_h:i,w:i,h:i,video_en_fps:i,video_en_bps:i,audio_c_channel_count:i,audio_en_bps:i,aec_level:i,ans_level:i,agc:i,traffic_control_min_video_bitrate:i},kZegoTaskVideoCaptureSize:{event:"sdk/api/publish_video_c_size",session_id:i,w:i,h:i},kZegoTaskRePublish:"/sdk/republish",kZegoTaskPublishStop:{event:"/sdk/stop_publish",error:{kParamError:o.errorCodeList.PUBLISHER_PARAM},stream:i},kZegoTaskPlayStart:{event:"/sdk/api/play_request",error:{kStreamIDNullError:o.errorCodeList.STREAM_ID_NULL,kPlayParamError:o.errorCodeList.PLAYER_PARAM,kPlayStreamIDToLongError:o.errorCodeList.STREAMID_TOO_LONG,kPlayStreamIDInvalidCharacterError:o.errorCodeList.STREAM_ID_INVALID_CHARACTER,kPlayNoLoginError:o.errorCodeList.NOT_LOGIN,kPlayRepeatedPullError:o.errorCodeList.REPEATED_PULL,kPlayNetworkTimeoutError:o.errorCodeList.TIMEOUT,kPlayDispatchTimeoutError:o.errorCodeList.DISPATCH_TIMEOUT,kPlayDispatchError:o.errorCodeList.DISPATCH_ERROR,kPlayNetworkBrokenError:o.errorCodeList.NETWORK_BROKEN,kPlayRetryTimeoutError:o.errorCodeList.PLAYER_RETRY_TIMEOUT,kPlaySessionClosedError:o.errorCodeList.PLAYER_SESSION_CLOSED,kPlayNegoTimeoutError:o.errorCodeList.PLAYER_SERVER_NEGO_TIMEOUT,kCreateOfferError:o.errorCodeList.PLAYER_CREATE_OFFER_ERROR,kSetLocalDescError:o.errorCodeList.PLAYER_SET_LOCAL_DESC_ERROR,kSessionRequestError:o.errorCodeList.PLAYER_SESSION_REQUEST_FAIL,kSetRemoteDescError:o.errorCodeList.PLAYER_SET_REMOTE_DESC_ERROR,kMediaConnectionError:o.errorCodeList.PLAYER_MEDIA_CONNECTION_ERROR,kWebsocketDisconnectedError:o.errorCodeList.PLAYER_WEBSOCKET_DISCONNECTED,kCandidateError:o.errorCodeList.PLAYER_CANDIDATE_ERROR,kMediaDescError:o.errorCodeList.PLAYER_MEDIA_DESC_ERROR,kIsPlaying:o.errorCodeList.PLAYER_IS_PLAYING},playOption:i,message:i,session_id:i,stream:i,audio_activate:i,video_activate:i},kZegoTaskRePlay:"/sdk/replay",kZegoTaskPlayStop:{event:"/sdk/stop_play",error:{kParamError:o.errorCodeList.PUBLISHER_PARAM},stream:i},kZegoPlayContentChanged:{event:"/sdk/play_content_changed",session_id:i,video_activate:i,audio_activate:i},kZegoTaskMixStart:{event:"/mix/start_mix",error:{kParamError:o.errorCodeList.INPUT_PARAM,kTaskIDNullError:o.errorCodeList.MIXER_TASK_ID_NULL,kTaskIDToLongError:o.errorCodeList.MIXER_TASK_ID_TOO_LONG,kTaskIDInvalidCharacterError:o.errorCodeList.MIXER_TASK_ID_INVALID_CHARACTER,kInputListNullError:o.errorCodeList.MIXER_INPUTLIST_NULL,kOutputListNullError:o.errorCodeList.MIXER_OUTPUTLIST_NULL,kOutputTargetInvalidError:o.errorCodeList.MIXER_OUTPUT_TARGET_INVALID,kOutputNoTargetError:o.errorCodeList.MIXER_NO_OUTPUT_TARGET,kRequestError:o.errorCodeList.MIXER_START_REQUEST_ERROR,kInternalError:o.errorCodeList.MIXER_INNER_ERROR},mix_stream_id:i,stream_cnt:i,input_stream_list:i,output_target_list:i},kZegoTaskMixStop:{event:"/mix/stop_mix",error:{kParamError:o.errorCodeList.INPUT_PARAM,kTaskIDNullError:o.errorCodeList.MIXER_TASK_ID_NULL,kRequestError:o.errorCodeList.MIXER_STOP_REQUEST_ERROR,kInternalError:o.errorCodeList.MIXER_INNER_ERROR}},kZegoTaskMixConfig:{event:"/mix/config_mix",error:{kParamError:o.errorCodeList.INPUT_PARAM,kVideoConfigInvalidError:o.errorCodeList.MIXER_VIDEO_CONFIG_INVALID,kBackgroundImageUrlInvalidError:o.errorCodeList.MIXER_BACKGROUND_IMAGE_URL_INVALID},config:i},kZegoTaskEnumDevices:{event:"/device/list",error:{kBrowserNotSupportError:o.errorCodeList.PUBLISHER_BROWSER_NOT_SUPPORT,kEnumDevicesError:o.errorCodeList.ENUMERATE_DEVICES_FAIL},dev_list:i},kZegoTaskAudioOutput:{event:"/device/audio_capture",error:{kBrowserNotSupportError:o.errorCodeList.PUBLISHER_BROWSER_NOT_SUPPORT,kEnumDevicesError:o.errorCodeList.ENUMERATE_DEVICES_FAIL},session_id:i,device:i},kZegoTaskVideoCapture:{event:"/device/video_capture",error:{kBrowserNotSupportError:o.errorCodeList.PUBLISHER_BROWSER_NOT_SUPPORT,kEnumDevicesError:o.errorCodeList.ENUMERATE_DEVICES_FAIL},session_id:i,device:i},kZegoTaskDeviceInterrupt:{event:"/device/interrupt",error:{kBrowserNotSupportError:o.errorCodeList.PUBLISHER_BROWSER_NOT_SUPPORT,kEnumDevicesError:o.errorCodeList.ENUMERATE_DEVICES_FAIL},session_id:i,interrupt:i},kZegoTaskSetDebug:"/sdk/set_debug",kZegoTaskSetLog:"/sdk/set_log_config",kZegoTaskUseVideoDevice:{event:"/sdk/use_video_device",error:{kParamError:o.errorCodeList.INPUT_PARAM,kDevicesNoFoundError:o.errorCodeList.DEVICE_NOT_FOUND,kLocalStreamError:o.errorCodeList.LOCALSTREAM_WRONG},deviceID:i},kZegoTaskUseAudioDevice:{event:"/sdk/use_audio_device",error:{kParamError:o.errorCodeList.INPUT_PARAM,kDevicesNoFoundError:o.errorCodeList.DEVICE_NOT_FOUND,kLocalStreamError:o.errorCodeList.LOCALSTREAM_WRONG},deviceID:i},kZegoTaskCheckSystemRequirements:{event:"/sdk/check_system",capability:i},kZegoTaskMutePublishVideo:"/sdk/mute_publish_video",kZegoTaskMutePublishAudio:"/sdk/mute_publish_audio",kZegoTaskMutePlayVideo:"/sdk/mute_play_video",kZegoTaskMutePlayAudio:"/sdk/mute_play_audio",kZegoTaskRemoteCameraUpdate:{event:"/sdk/remote_camera_update",stream:i,status:i},kZegoTaskRemoteMicUpdate:{event:"/sdk/remote_mic_update",stream:i,status:i},kZegoTaskGetSoundLevel:{event:"/sdk/get_sound_level",error:{kGetSoundLevelError:o.errorCodeList.GET_SOUND_LEVEL_FAIL}},kZegoTaskStopSoundLevel:"/sdk/stop_sound_level",kZegoTaskAddPublishCdnUrl:{event:"/sdk/add_publish_cdn_url",error:{kParamError:o.errorCodeList.INPUT_PARAM}},kZegoTaskRemovePublishCdnUrl:{event:"/sdk/remove_publish_cdn_url",error:{kParamError:o.errorCodeList.INPUT_PARAM},stream:i,target_url:i},kZegoTaskClearPublishCdnUrl:{event:"/sdk/clear_publish_cdn_url",error:{kParamError:o.errorCodeList.INPUT_PARAM}},kZegoTaskPublishTarget:{event:"/sdk/publish_target",error:{kParamError:o.errorCodeList.INPUT_PARAM,kPublishStreamNoFoundError:o.errorCodeList.PUBLISHER_STREAM_NO_FOUND}},kZegoTaskDestroyStream:{event:"/sdk/destroy_stream",error:{kLocalStreamError:o.errorCodeList.LOCALSTREAM_WRONG}},kZegoTaskScreenSharingEnded:"/sdk/screen_share_end",kZegoTaskAudioOutputChanged:{event:"/device/api/audio_output",session_id:i,stream:i,device:i,reason:i},kZegoTaskAudioDeviceChanged:{event:"/device/api/audio_c",session_id:i,stream:i,device:i,reason:i},kZegoTaskVideoDeviceChanged:{event:"/device/api/video_c",session_id:i,stream:i,device:i,reason:i},kZegoEventPublishStat:"/sdk/publish_stat_report",kZegoEventPlayStat:"/sdk/play_stat_report",kZegoSetAudioConfig:{event:"/sdk/set_audio_config",error:{kParamError:o.errorCodeList.INPUT_PARAM}},kZegoSetVideoConfig:{event:"/sdk/set_video_config",error:{kParamError:o.errorCodeList.INPUT_PARAM,kLocalStreamError:o.errorCodeList.LOCALSTREAM_WRONG}},kZegoReplaceTrack:{event:"/sdk/replace_track",error:{kParamError:o.errorCodeList.INPUT_PARAM}},kZegoTaskLiveRoomGetStreamUpdateInfo:{event:"/liveroom/get_stream_update_info",stream_update_type:i,update_stream:i},kZegoTaskLiveRoomGetStreamExtraInfo:{event:"/liveroom/get_stream_extra_info",update_stream:i},kZegoTaskLiveRoomSendStreamExtraInfo:{event:"/liveroom/send_stream_extra_info",error:{kParamError:o.errorCodeList.INPUT_PARAM,kExtraInfoNullError:o.errorCodeList.PUBLISHER_EXTRA_INFO_NULL,kNoLoginError:o.errorCodeList.NOT_LOGIN,kPublishStreamNoFoundError:o.errorCodeList.PUBLISHER_STREAM_NO_FOUND},stream:i,stream_extra_info:i,room_sid:i},kZegoTaskPlayDecodeFirstVideoFrame:{event:"/sdk/play_decode_first_video_frame",session_id:i,fft_consumed:i}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorCodeList=t.innerErrList=void 0,t.innerErrList={SUCCESS:{code:0,message:""},SEND_MSG_TIMEOUT:{code:"Error.Timeout",message:"send customessage timeout."}},t.errorCodeList={NOT_LOGIN:{code:1000002,message:"not login room"},STREAMID_TOO_LONG:{code:1000014,message:"stream ID is too long"},STREAM_ID_NULL:{code:1000015,message:"streamID is empty"},STREAM_ID_INVALID_CHARACTER:{code:1000016,message:"stream ID contains illegal characters"},NETWORK_BROKEN:{code:1000017,message:"network is broken"},LOCALSTREAM_WRONG:{code:1000018,message:"local stream wrong"},GET_SOUND_LEVEL_FAIL:{code:1000019,message:"get sound level error"},INPUT_PARAM:{code:1100001,message:"input parm error."},TIMEOUT:{code:1100002,message:"network timeout."},UNKNOWN_SERVER_ERROR:{code:1100999,message:"unknown server error"},INIT_SDK_WRONG:{code:1101e3,message:"init sdk wrong"},USER_ID_NULL:{code:1002005,message:"user ID is empty"},USER_ID_INVALID_CHARACTER:{code:1002006,message:"user ID contains illegal characters"},USER_ID_TOO_LONG:{code:1002007,message:"user ID is too long"},USER_NAME_NULL:{code:1002008,message:"username is empty"},USER_NAME_TOO_LONG:{code:1002010,message:"username is too long"},ROOM_ID_NULL:{code:1002011,message:"room ID is empty"},ROOM_ID_INVALID_CHARACTER:{code:1002012,message:"room ID contains illegal characters"},ROOM_ID_TOO_LONG:{code:1002013,message:"room ID is too long"},LOGIN_TIMEOUT:{code:1002031,message:"login timeout"},ROOM_MAX_USER_COUNT:{code:1002034,message:"users logging into the room exceeds the maximum number"},MULTIPLE_LOGIN_KICKOUT:{code:1002050,message:"kickout may be the same user ID login other"},ROOM_RETRY_TIMEOUT:{code:1002053,message:"network is broken and login fail."},MANUAL_KICKOUT:{code:1002055,message:"server has sent a signal to kick out"},ROOM_INNER_ERROR:{code:1002099,message:"room inner error"},HEARTBEAT_TIMEOUT:{code:1102001,message:"heartbeat timeout."},PARSE_JSON_ERROR:{code:1102011,message:"parse json error."},LOGIN_PROCESSING:{code:1102012,message:"login is processing."},LIVEROMM_REQUEST_ERROR:{code:1102013,message:"liveroom request error."},ZPUSH_REQUEST_FAIL:{code:1102014,message:"zpush request fail."},LOGIN_STATE_WRONG:{code:1102015,message:"user login state is wrong."},TOKEN_ERROR:{code:1102016,message:"token error"},DISPATCH_ERROR:{code:1102017,message:"dispatch error"},TOKEN_EXPIRED:{code:1102018,message:"token expired"},SUBCMD_ERROR:{code:1102019,message:"subcmd error."},ZEGO_AUTH_ERROR:{code:1102020,message:"zego auth error."},BIZ_CHANNEL_ERROR:{code:1102021,message:"biz channel error."},DISPATCH_TIMEOUT:{code:1102022,message:"dispatch request timeout"},CONNECT_FAILED:{code:1102023,message:"connect signal fail"},PUBLISHER_EXTRA_INFO_NULL:{code:1003050,message:"extra info of publshing stream is null"},PUBLISHER_EXTRA_INFO_TOO_LONG:{code:1003051,message:"stream extra info is too long"},PUBLISHER_PARAM:{code:1103001,message:"input parm error"},PUBLISHER_BROWSER_NOT_SUPPORT:{code:1103002,message:"browser do not support"},PUBLISHER_DISPATCH_FAIL:{code:1103003,message:"dispatch request error"},PUBLISHER_SCREEN_FAILED:{code:1103010,message:"screen fail"},ENUMERATE_DEVICES_FAIL:{code:1103011,message:"enumerate devices fail"},PUBLISHER_DISPATCH_REQUEST_FAIL:{code:1103020,message:"dispatch request fail"},PUBLISHER_SESSION_REQUEST_FAIL:{code:1103021,message:"session request fail"},PUBLISHER_CREATE_OFFER_ERROR:{code:1103022,message:"create offer error"},PUBLISHER_SET_LOCAL_DESC_ERROR:{code:1103023,message:"setLocalDescription error"},PUBLISHER_MEDIA_DESC_ERROR:{code:1103024,message:"mediaDesc error"},PUBLISHER_SET_REMOTE_DESC_ERROR:{code:1103025,message:"other side offer error"},PUBLISHER_CANDIDATE_ERROR:{code:1103026,message:"candidate error"},PUBLISHER_SESSION_CLOSED:{code:1103027,message:"server session closed"},PUBLISHER_MEDIA_CONNECTION_ERROR:{code:1103028,message:"ice connection error"},PUBLISHER_CONSTRAINTS_ERROR:{code:1103029,message:"constraint error"},PUBLISHER_SERVER_NEGO_TIMEOUT:{code:1103030,message:"negotiation timeout"},PUBLISH_NOT_PUBLISH:{code:1103040,message:"publisher not found"},PUBLISH_DEVICE_OUT_ERR:{code:1103041,message:"device change "},PUBLISH_SCREEN_CANCELED:{code:1103042,message:"screen canceled"},PUBLISH_SCREEN_NOT_SUPPORT:{code:1103043,message:"screen not support"},PUBLISH_NO_PREVIEW:{code:1103044,message:"stream is not from zego"},VIDEO_DEVICE_FALSE:{code:1103045,message:"video is false"},AUDIO_DEVICE_FALSE:{code:1103046,message:"audio is false"},TRACK_NOT_FOUND:{code:1103047,message:"track is not found"},DEVICE_NOT_FOUND:{code:1103048,message:"device is not found"},REPEATED_PULL:{code:1103049,message:"repeated pull same stream"},PUBLISHER_WEBSOCKET_DISCONNECTED:{code:1103050,message:"websocket disconnected"},PUBLISHER_RETRY_TIMEOUT:{code:1103051,message:"publisher retry timeout"},PUBLISHER_CDN_PUSH_ERROR:{code:1103052,message:"publisher cdn push error"},PUBLISHER_HTTPS_REQUIRED:{code:1103053,message:"https is required"},PUBLISHER_NO_PREVIEW:{code:1103054,message:"no preview"},PUBLISHER_STREAM_NO_FOUND:{code:1103055,message:"publish stream no found"},PUBLISHER_IS_PUBLISHING:{code:1103056,message:"publish is publishing"},PUBLISHER_DECODE_AUDIO_FAIL:{code:1103057,message:"decode audio data fail"},PLAYER_PARAM:{code:1104001,message:"input parm error"},PLAYER_DISPATCH_REQUEST_FAIL:{code:1104020,message:"dispatch request fail"},PLAYER_SESSION_REQUEST_FAIL:{code:1104021,message:"session request fail"},PLAYER_CREATE_OFFER_ERROR:{code:1104022,message:"create offer error"},PLAYER_SET_LOCAL_DESC_ERROR:{code:1104023,message:"setLocalDescription error"},PLAYER_MEDIA_DESC_ERROR:{code:1104024,message:"mediaDesc error"},PLAYER_SET_REMOTE_DESC_ERROR:{code:1104025,message:"other side offer error"},PLAYER_CANDIDATE_ERROR:{code:1104026,message:"candidate error"},PLAYER_SESSION_CLOSED:{code:1104027,message:"server session closed"},PLAYER_MEDIA_CONNECTION_ERROR:{code:1104028,message:"ice connection error"},PLAYER_WEBSOCKET_DISCONNECTED:{code:1104029,message:"websocket disconnected"},PLAYER_SERVER_NEGO_TIMEOUT:{code:1104030,message:"negotiation timeout"},PLAYER_RETRY_TIMEOUT:{code:1104031,message:"player retry timeout"},PLAYER_IS_PLAYING:{code:1104032,message:"player is playing"},MIXER_NO_SERVICES:{code:1005e3,message:"no mix stream service"},MIXER_TASK_ID_NULL:{code:1005001,message:"mixer task is null"},MIXER_TASK_ID_TOO_LONG:{code:1005002,message:"task ID is too long"},MIXER_TASK_ID_INVALID_CHARACTER:{code:1005003,message:"task ID contains illegal characters"},MIXER_NO_OUTPUT_TARGET:{code:1005005,message:"task configuration does not specify output"},MIXER_OUTPUT_TARGET_INVALID:{code:1005006,message:"stream output target is incorrect"},MIXER_START_REQUEST_ERROR:{code:1005010,message:"start mixer task fail, possibly due to network reasons"},MIXER_STOP_REQUEST_ERROR:{code:1005011,message:"stop mixer task fail, possibly due to network reasons"},MIXER_NOT_OWNER_STOPMIXER:{code:1005012,message:" maxed task must be stopped by the start user of the task"},MIXER_INPUTLIST_NULL:{code:1005020,message:"Mixed stream task input list is null"},MIXER_OUTPUTLIST_NULL:{code:1005021,message:"Mixed stream task output list is null"},MIXER_VIDEO_CONFIG_INVALID:{code:1005023,message:"invalid mixed stream task video configuration"},MIXER_EXCEED_MAX_INPUT_COUNT:{code:1005025,message:"more than the maximum number of input streams"},MIXER_INPUT_STREAM_NOT_EXISTS:{code:1005026,message:"Input stream does not exist"},MIXER_INPUT_PARAMETERS_ERROR:{code:1005027,message:"stream input parameters are wrong"},MIXER_EXCEED_MAX_OUTPUT_COUNT:{code:1005030,message:"more than the maximum number of output streams"},MIXER_AUTHENTICATION_FAILED:{code:1005050,message:"mixed stream authentication failed"},MIXER_WATERMARK_NULL:{code:1005061,mag:"input watermark is null"},MIXER_WATERMARK_PARAMETERS_ERROR:{code:1005062,message:"input watermark parameter is wrong"},MIXER_WATERMARK_URL_INVALID:{code:1005063,message:"illegal input watermark URL"},MIXER_BACKGROUND_IMAGE_URL_INVALID:{code:1005067,message:"illegal input background image URL"},MIXER_INNER_ERROR:{code:1005099,message:"mixed stream internal error"},DEVICE_ERROR_TYPE_UNPLUGGED:{code:1006006,message:"the device is unplugged"},IM_CONTENT_NULL:{code:1009001,message:"message content is empty"},IM_CONTENT_TOO_LONG:{code:1009002,message:"message content is too long"},IM_SEND_FAILED:{code:1009010,message:"failed to send message"},FREQ_LIMITED:{code:1109001,message:"frequency limited."}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StateCenter=void 0;var o=function(){this.testEnvironment=!1,this.third_token="",this.pullLimited=!0,this.configOK=!1,this.roomCreateFlag=1,this.debugVerbose=!1,this.streamUpdated=!1};t.StateCenter=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StreamVideoCenter=void 0;var o=function(){function e(){this.publishVideoStreamList=[],this.playVideoStreamList=[],this.screenShotStreamList=[],this.audio=[]}return e.prototype.checkPublishVideo=function(e){for(var t=0;t<this.publishVideoStreamList.length;t++)if(this.publishVideoStreamList[t].video===e)return this.publishVideoStreamList[t];return null},e.prototype.checkPlayVideo=function(e){for(var t=0;t<this.playVideoStreamList.length;t++)if(this.playVideoStreamList[t].video===e)return this.playVideoStreamList[t];return null},e.prototype.removePublishVideo=function(e){for(var t=0;t<this.publishVideoStreamList.length;t++)if(this.publishVideoStreamList[t].video===e){this.publishVideoStreamList.splice(t--,1);break}},e.prototype.setStreamAudioOutput=function(e,t){var r=this;return!(null==t||0==t.length||!e)&&(this.logger.debug("zsc.ssao.0 device "+t),e?"undefined"!==e.sinkId?(e.setSinkId(t).then((function(){r.logger.info("zsc.ssao.0 success device: "+t)})).catch((function(e){r.logger.info("zsc.ssao.0 "+e.name)})),!0):(this.logger.error("zsc.ssao.0 browser does not support"),!1):(this.logger.error("zsc.ssao.0 no localVideo"),!1))},e.prototype.setPlayStreamAudioOutput=function(e,t){if(null!=t&&0!=t.length){this.logger.debug("zsc.psao.1 device "+t);var r=this.playVideoStreamList.find((function(t){return t.streamID===e}));return r?this.setStreamAudioOutput(r.video,t):(this.logger.info("zsc.psao.1 play don't exist"),!1)}return!1},e}();t.StreamVideoCenter=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MediaUtil=void 0;var o=r(1),i=function(){function e(e){var t=this,r=e.type,o=e.channels,i=void 0===o?1:o,n=e.bufferSize,s=void 0===n?0:n,a=e.sampleBit,d=void 0===a?16:a,c=e.sampleRate,u=void 0===c?44100:c;this.instant=0,this.slow=0,this.clip=0;var E=new("undefined"!=typeof webkitAudioContext?webkitAudioContext:AudioContext);this.context=E,this.type=r,this.channels=i,this.bufferSize=s,this.sampleBit=d,this.sampleRate=u,this.script=E.createScriptProcessor(s,i,i);(new Date).getTime();this.script.addEventListener("audioprocess",(function(e){var o,i=e.inputBuffer.getChannelData(0),n=0,s=0;for(o=0;o<i.length;++o)n+=i[o]*i[o],Math.abs(i[o])>.99&&(s+=1);if(t.instant=Math.sqrt(n/i.length),t.slow=.95*t.slow+.05*t.instant,t.clip=s/i.length,"pcm"===r||"wav"===r){for(var a=[],d=0;d<t.channels;d++)a.push(e.inputBuffer.getChannelData(d));t.recorderBuffer(a)}})),"pcm"!==r&&"wav"!==r||this.initRecorderBuffer(r)}return e.prototype.connectToSource=function(e,t){console.log("SoundMeter connecting");try{this.mic=this.context.createMediaStreamSource(e),this.mic.connect(this.script),this.script.connect(this.context.destination),void 0!==t&&t(null)}catch(e){console.error(e),void 0!==t&&t(e)}return this},e.prototype.recorderBuffer=function(e){this.worker.postMessage({command:"record",val:e})},e.prototype.initRecorderBuffer=function(e){var t=this,r=this;this.worker=o.ClientUtil.inlineWorker((function(){var e,r,o,i,n,s,a=[],d=t;function c(e,t,r){for(var o=0;o<r.length;o++,t+=2){var i=Math.max(-1,Math.min(1,r[o]));e.setInt16(t,i<0?32768*i:32767*i,!0)}}function u(e,t,r){for(var o=0;o<r.length;o++,t++){var i=Math.max(-1,Math.min(1,r[o])),n=i<0?128*i:127*i;n+=128,e.setInt8(t,n)}}function E(e,t,r){for(var o=0;o<r.length;o++)e.setUint8(t+o,r.charCodeAt(o))}function l(e,t){for(var r=new Float32Array(t.length/e),o=0,i=0;o<r.length;)r[o]=t[i],i+=e,o++;return r}function _(e,t,r){for(var o=new Float32Array(t*e.length),i=0,n=0;n<r[0].length;n++)o.set(r[0][n],i),i+=r[0][n].length;return o}function m(e,t){for(var r=new Float32Array(e.length+t.length),o=0;o<e.length+t.length;o+=2)r[o]=e[o/2>>0],r[o+1]=t[o/2>>0];return r}function p(t){var r,o;if(1==e)r=_(a[0],n,a),1!=t&&(o=l(t,r));else if(2==e){var i=_(a[0],n,a),s=_(a[1],n,a);1!=t?o=m(l(t,i),l(t,s)):r=m(i,s)}return 1!=t?o:r}function g(e){var t=function(e,t){var o;8==t?o=e.length:16==t&&(o=e.length,o*=2);var i=new ArrayBuffer(o),n=new DataView(i);return 8==t?u(n,0,e):16==r&&c(n,0,e),n}(p(e),r);d.postMessage({command:"exportPcmLive",val:t})}function R(t){var i=function(t,i){var n;8==i?n=t.length:16==r&&(n=t.length,n*=2);var s=new ArrayBuffer(n+44),a=new DataView(s),d=o,l=r,_=e;return E(a,0,"RIFF"),a.setUint32(4,36+n,!0),E(a,8,"WAVE"),E(a,12,"fmt "),a.setUint32(16,16,!0),a.setUint16(20,1,!0),a.setUint16(22,_,!0),a.setUint32(24,d,!0),a.setUint32(28,d*_*(l/8),!0),a.setUint16(32,_*(l/8),!0),a.setUint16(34,l,!0),E(a,36,"data"),a.setUint32(40,n,!0),8==r?u(a,44,t):16==r&&c(a,44,t),a}(p(t),r);d.postMessage({command:"exportWav",val:i})}t.onmessage=function(t){switch(t.data.command){case"init":d=t.data.val,e=d.sampleChannel,r=d.sampleBit,o=d.sampleRate,i=d.oldSampleRate,n=d.bufferSize,s=d.type;break;case"record":!function(t){for(var r=0;r<e;r++)a[r]||(a[r]=[]),a[r].push(t[r]);var n=Math.round(i/o);"pcm"===s?g(n):"wav"===s&&R(n),a=[]}(t.data.val)}var d}})),this.worker.postMessage({command:"init",val:{sampleChannel:this.channels,sampleBit:this.sampleBit,sampleRate:this.sampleRate,oldSampleRate:this.context.sampleRate,bufferSize:this.bufferSize,type:e}}),this.worker.onmessage=function(e){switch(e.data.command){case"exportPcmLive":r.onReceiveBuffer(e.data.val);break;case"exportWav":r.onReceiveWav(e.data.val)}}},e.prototype.onReceiveBuffer=function(e){},e.prototype.onReceiveWav=function(e){},e.prototype.writeString=function(e,t,r){for(var o=0;o<r.length;o++)e.setUint8(t+o,r.charCodeAt(o))},e.prototype.writeBuffer=function(e,t,r){for(var o=0;o<r.byteLength;o++)e.setUint8(t+o,r[o])},e.prototype.concatenation=function(e){for(var t=0,r=0;r<e.length;++r)t+=e[r].buffer.byteLength;var o=new Uint8Array(t),i=0;for(r=0;r<e.length;++r)o.set(new Uint8Array(e[r].buffer),i),i+=e[r].buffer.byteLength;return o},e.prototype.encodeWave=function(e){var t=this.concatenation(e),r=t.byteLength,o=new ArrayBuffer(r+44),i=new DataView(o),n=this.sampleRate,s=this.sampleBit,a=this.channels;return this.writeString(i,0,"RIFF"),i.setUint32(4,36+r,!0),this.writeString(i,8,"WAVE"),this.writeString(i,12,"fmt "),i.setUint32(16,16,!0),i.setUint16(20,1,!0),i.setUint16(22,a,!0),i.setUint32(24,n,!0),i.setUint32(28,n*a*(s/8),!0),i.setUint16(32,a*(s/8),!0),i.setUint16(34,s,!0),this.writeString(i,36,"data"),i.setUint32(40,r,!0),this.writeBuffer(i,44,t),i},e.prototype.stop=function(){this.mic.disconnect(),this.script.disconnect()},e}();t.MediaUtil=i}])}));